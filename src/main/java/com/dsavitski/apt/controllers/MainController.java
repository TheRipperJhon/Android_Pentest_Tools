package com.dsavitski.apt.controllers;

import com.dsavitski.apt.service.AdbService;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.ChoiceBox;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;

/**
 * Main window controller
 */

@Controller
public class MainController {
    @Autowired
    AdbService adbService;
    @FXML
    ChoiceBox<String> choicePackages;

    @FXML
    public void initialize() {
        choicePackages.getSelectionModel()
                .selectedIndexProperty()
                .addListener((observable, oldValue, newValue) -> System.err.println(">>>>>>>>>>>>>>>> Package changed" + newValue));
    }

    @FXML
    public void pullApplicationsList() {
        ObservableList<String> packages = FXCollections.observableArrayList(adbService.pullPacketsList());
        choicePackages.setItems(packages);
        choicePackages.getSelectionModel().selectFirst();
    }
}
