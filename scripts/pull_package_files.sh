#!/bin/bash
session_dir=$1
package=$2
main_path='/data/data/'$package
sdcard_path='/sdcard/Android/data/'$package

# create session dir if not exist
mkdir -p $session_dir

# pull files from data dir
adb pull $main_path $session_dir/$package

# pull files from sdcard
adb pull $sdcard_path $session_dir/$package/sdcard

# init git repository if not exist
if [ ! -d $session_dir/$package/.git ]
then
    git init $session_dir/$package/
fi

# Commit current package state
cd $session_dir/$package/ 
git add --all
git commit -m "Autocommit: $(date)"
